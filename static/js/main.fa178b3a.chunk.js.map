{"version":3,"sources":["components/index.js","hooks/useWeb3Modal.js","components/Canvas.jsx","apiKeys/ApiKeys.ts","hooks/MoralisAPI.ts","App.jsx","index.js"],"names":["Header","styled","header","MenuItems","div","ReactButton","img","a","attrs","target","rel","button","props","hidden","useWeb3Modal","config","useState","provider","setProvider","autoLoaded","setAutoLoaded","autoLoad","infuraId","network","web3Modal","useMemo","Web3Modal","cacheProvider","providerOptions","walletconnect","package","WalletConnectProvider","options","loadWeb3Modal","useCallback","connect","newProvider","Web3Provider","logoutOfWeb3Modal","clearCachedProvider","window","location","reload","useEffect","cachedProvider","Canvas","soundFile","useRef","amplitude","backgroundColor","rectRotate","beatCutoff","beatDecayRate","framesSinceLastBeat","touchEnded","evt","current","_playing","_looping","play","pause","setup","_p5","canvasParentRef","console","log","canvas","createCanvas","parent","elt","addEventListener","style","noStroke","rectMode","CENTER","color","random","onBeat","video","id","onLoadStart","document","getElementById","volume","width","height","key","url","autoPlay","src","type","display","margin","position","preload","length","stop","loadSound","constructor","Amplitude","setInput","smooth","err","draw","clear","background","level","getLevel","Math","max","detectBeat","rotation","distortDiam","map","PI","rectCenter","createVector","push","i","x","y","translate","rotate","rect","pop","ApiKeys","MORALIS_API_KEY","MoralisAPI","accountAddress","axios","method","this","getNftUrl","headers","then","res","data","result","m","metadata","JSON","parse","BASE_PATH","WalletButton","account","setAccount","rendered","setRendered","listAccounts","accounts","lookupAddress","name","substring","error","fetchAccount","onClick","App","contractAddress","setContractAddress","nfts","setNfts","playbackURL","setPlaybackURL","address","setAddress","moralisAPI","match","useMatch","urlAddress","params","slug","getNFTs","newAddress","marginLeft","href","musicNFTHolders","floor","randomAddress","filter","nft","animation_url","idx","Card","sx","maxWidth","float","CardMedia","component","image","alt","CardContent","Typography","variant","CardActions","Button","size","onMouseUp","client","ApolloClient","uri","ReactDOM","render","ApolloProvider","path","element"],"mappings":"6gBAEaA,EAASC,IAAOC,OAAV,gMAUNC,EAAYF,IAAOG,IAAV,kOAqCTC,GAzBOJ,IAAOG,IAAV,iPAWIH,IAAOK,IAAV,gGAMEL,IAAOM,EAAEC,MAAM,CACjCC,OAAQ,SACRC,IAAK,uBAFaT,CAAH,oEAQUA,IAAOU,OAAV,sTAYpB,SAAAC,GAAK,OAAIA,EAAMC,QAAU,a,oCCHdC,MA/Cf,WAAoC,IAAdC,EAAa,uDAAJ,GAC7B,EAAgCC,qBAAhC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAoCF,oBAAS,GAA7C,mBAAOG,EAAP,KAAmBC,EAAnB,KACA,EAAqEL,EAA7DM,gBAAR,WAAqEN,EAA5CO,gBAAzB,MAPgB,qBAOhB,IAAqEP,EAAtBQ,eAA/C,MALc,UAKd,EAIMC,EAAYC,mBAAQ,WACxB,OAAO,IAAIC,IAAU,CACnBH,UACAI,eAAe,EACfC,gBAAiB,CACfC,cAAe,CACbC,QAASC,IACTC,QAAS,CACPV,kBAKP,CAACA,EAAUC,IAGRU,EAAgBC,sBAAW,sBAAC,4BAAA3B,EAAA,sEACNiB,EAAUW,UADJ,OAC1BC,EAD0B,OAEhClB,EAAY,IAAImB,IAAaD,IAFG,2CAG/B,CAACZ,IAEEc,EAAoBJ,sBAAW,sBACnC,sBAAA3B,EAAA,sEACQiB,EAAUe,sBADlB,OAEEC,OAAOC,SAASC,SAFlB,2CAIA,CAAClB,IAWH,OAPAmB,qBAAU,WACJtB,IAAaF,GAAcK,EAAUoB,iBACvCX,IACAb,GAAc,MAEf,CAACC,EAAUF,EAAYc,EAAeb,EAAeI,EAAUoB,iBAE3D,CAAC3B,EAAUgB,EAAeK,I,kBCuHpBO,G,OAxKF,SAACjC,GACV,IAAMkC,EAAYC,iBAAO,MACnBC,EAAYD,iBAAO,MAEnBE,EAAkBF,iBAAO,MAGzBG,EAAaH,kBAAO,GAkBpBI,EAAaJ,iBAAO,GACpBK,EAAgBL,iBAAO,KACvBM,EAAsBN,iBAAO,GAE7BO,EAAa,SAACC,GACXT,EAAUU,UAAWV,EAAUU,QAAQC,UAM5CX,EAAUU,QAAQE,UAAW,EAC7BZ,EAAUU,QAAQG,QANVb,EAAUU,SAAWV,EAAUU,QAAQC,UACvCX,EAAUU,QAAQI,SA6BxBC,EAAK,uCAAG,WAAOC,EAAKC,GAAZ,eAAAxD,EAAA,sDACVyD,QAAQC,IAAI,mBAGRC,EAASJ,EAAIK,aAAa,IAAK,KAAKC,OAAOL,IACxCM,IAAIC,iBAAiB,YAAahB,GACzCY,EAAOK,MAAO,SAAU,QACxBL,EAAOK,MAAO,UAAW,SACzBL,EAAOK,MAAO,UAAW,QACzBT,EAAIU,WACJV,EAAIW,SAASX,EAAIY,QACjBzB,EAAgBO,QAAUM,EAAIa,MAC1Bb,EAAIc,OAAO,EAAE,KACbd,EAAIc,OAAO,EAAE,KACbd,EAAIc,OAAO,EAAE,KACb,IAEA9B,EAAUU,SACVV,EAAUU,QAAQG,OAGtBK,QAAQC,IAAI,gBArBF,4CAAH,wDAuCLY,EAAS,SAACf,GACPhB,EAAUU,SAAYV,EAAUU,QAAQC,WAG7CR,EAAgBO,QAAUM,EAAIa,MAC1Bb,EAAIc,OAAO,EAAE,KACbd,EAAIc,OAAO,EAAE,KACbd,EAAIc,OAAO,EAAE,KACb,IAEJ1B,EAAWM,SAAWN,EAAWM,UA2CrCQ,QAAQC,IAAI,0BACZ,IAAMa,EAAS,2BAAOC,GAAG,SAASC,YAAa,WAC3CC,SAASC,eAAe,UAAUC,OAAS,GAC5CZ,MAAO,CAACa,MAAO,QAASC,OAAQ,QAAS,OAAU,GAAIC,IAAK,OAAS1E,EAAM2E,IAAKH,MAAM,MAAMC,OAAO,MAAMG,UAAU,GAClH,4BAAQC,IAAK7E,EAAM2E,IAAKG,KAAK,cAHlB,gDAQf,OAFA1B,QAAQC,IAAIa,GAEL,yBAAKP,MAAO,CAACoB,QAAS,OAAQ,WAAc,SAAU,eAAkB,SAAUP,MAAO,QAASC,OAAQ,QAASO,OAAQ,SAC7Hd,EACD,kBAAC,IAAD,CAAQP,MAAO,CAACsB,SAAU,WAAY,OAAU,GAAyBP,IAAK1E,EAAM2E,IAAKO,QA5H7E,SAAChC,GACbE,QAAQC,IAAI,oBAEZ,IAAMsB,EAAM3E,EAAM2E,IAClB,GAAKA,GAAQA,EAAIQ,OAAjB,CAGA,IACIjD,EAAUU,SAAWV,EAAUU,QAAQwC,OACvClD,EAAUU,QAAUM,EAAImC,UAAUV,GAAK,WACnCvC,EAAUQ,QAAU,IAAIM,EAAIoC,YAAYC,UACxCnD,EAAUQ,QAAQ4C,SAAStD,EAAUU,SACrCR,EAAUQ,QAAQ6C,OAAO,IACzBpB,SAASC,eAAe,UAAUvB,UAExC,MAAO2C,GACLtC,QAAQC,IAAIqC,GAEhBxD,EAAUU,QAAQE,UAAW,EAC7BM,QAAQC,IAAI,oBAyG+FJ,MAAOA,EAAO0C,KAnDhH,SAACzC,GAMV,GALAA,EAAI0C,QACAvD,EAAgBO,SAChBM,EAAI2C,WAAWxD,EAAgBO,SAG9BR,EAAUQ,QAAf,CAGA,IAAMkD,EAAQ1D,EAAUQ,QAAQmD,YArCjB,SAAC7C,EAAK4C,GACjBA,EAASvD,EAAWK,SAAWkD,EAjEjB,KAkEd7B,EAAOf,GACPX,EAAWK,QAAiB,IAAPkD,EACrBrD,EAAoBG,QAAU,GAE1BH,EAAoBG,SAzET,GA0EXH,EAAoBG,WAEpBL,EAAWK,SAAWJ,EAAcI,QACpCL,EAAWK,QAAUoD,KAAKC,IAAI1D,EAAWK,QA1E/B,MAsGlBsD,CAAWhD,EAAK4C,GAGhB,IACIK,EADEC,EAAclD,EAAImD,IAAIP,EAAO,EAAG,EAAG,EAAG,MAKxCK,EADA7D,EAAWM,QACAM,EAAIoD,GAAI,EAERpD,EAAIoD,GAAI,EAIvB,IAAMC,EAAarD,EAAIsD,aAAatD,EAAIsB,MAAM,EAAGtB,EAAIuB,OAAO,GAE5DvB,EAAIuD,OAGJ,IAAK,IAAIC,EAAI,EAAGA,EApIH,GAoIiBA,IAAK,CAC/B,IAAMC,EAAIJ,EAAWI,EAtIV,GAsI2BD,EAChCE,EAAIL,EAAWK,EAAIR,EAAc,EAEvClD,EAAI2D,UAAUF,EAAGC,GACjB1D,EAAI4D,OAAOX,GACXjD,EAAI6D,KAAK,EAAG,EA5IJ,MA4I0BX,GAEtClD,EAAI8D,a,iCC5JCC,EAAb,kCAAaA,EACFC,gBAAkB,mECctB,IAAMC,EAAb,yFACI,SAAUC,GACN,MAAM,wCAAN,OAA+CA,EAA/C,mCAFR,qBAKI,SAAQA,GACJ,OAAOC,IAAM,CACTC,OAAQ,MACR3C,IAAK4C,KAAKC,UAAUJ,GACpBK,QAAS,CACL,YAAaR,EAAQC,gBACrB,OAAU,sBAEfQ,MAAK,SAAAC,GACJ,OAAKA,EAAIC,MAASD,EAAIC,KAAKC,OAGXF,EAAIC,KAAKC,OAAOxB,KAAI,SAACyB,GAEjC,OADAA,EAAEC,SAAWC,KAAKC,MAAMH,EAAEC,UACnBD,KAJA,UAfvB,K,sDCDMI,EAAY,2BAClB,SAASC,EAAT,GAAuE,IAA/C9H,EAA8C,EAA9CA,SAAUgB,EAAoC,EAApCA,cAAeK,EAAqB,EAArBA,kBAC/C,EAA8BtB,mBAAS,IAAvC,mBAAOgI,EAAP,KAAgBC,EAAhB,KACA,EAAgCjI,mBAAS,IAAzC,mBAAOkI,EAAP,KAAiBC,EAAjB,KA+BA,OA7BAxG,qBAAU,WAAM,4CACd,8BAAApC,EAAA,kEAESU,EAFT,iEAO2BA,EAASmI,eAPpC,cAOUC,EAPV,OAQIJ,EAAWI,EAAS,IARxB,SAWuBpI,EAASqI,cAAcD,EAAS,IAXvD,OAWUE,EAXV,OAeMJ,EADEI,GAGUP,EAAQQ,UAAU,EAAG,GAAK,MAAQR,EAAQQ,UAAU,KAjBtE,kDAoBIP,EAAW,IACXE,EAAY,IACZnF,QAAQyF,MAAR,MAtBJ,2DADc,uBAAC,WAAD,wBA0BdC,KACC,CAACV,EAAS/H,EAAUgI,EAAYE,IAGjC,kBAAC9I,EAAD,CACEsJ,QAAS,WACF1I,EAGHqB,IAFAL,MAMU,KAAbiH,GAAmB,iBACN,KAAbA,GAAmB,qBAsGXU,MAjGf,WACE,MAAqD9I,IAArD,mBAAOG,EAAP,KAAiBgB,EAAjB,KAAgCK,EAAhC,KACA,EAA8CtB,mBAAS,MAAvD,mBAAO6I,EAAP,KAAwBC,EAAxB,KACA,EAAwB9I,mBAAS,IAAjC,mBAAO+I,EAAP,KAAaC,EAAb,KACA,EAAsChJ,mBAAS,MAA/C,mBAAOiJ,EAAP,KAAoBC,EAApB,KACA,EAA8BlJ,mBAAS,MAAvC,mBAAOmJ,EAAP,KAAgBC,EAAhB,KACMC,EAAa,IAAItC,EAEnBuC,EAAQC,YAAS,GAAD,OAAIzB,EAAJ,WACd0B,EAAaF,GAASA,EAAMG,QAAUH,EAAMG,OAAOC,KAqCzD,OAnCA/H,qBAAU,YACHkH,IAAoBA,EAAgB9D,QAAUgE,EAAKhE,OAAS,GAGjEsE,EAAWM,QAAQd,GAAiBvB,MAAK,SAAAyB,GACvCC,EAAQD,QAET,CAACF,EAAiBQ,IAErB1H,qBAAU,WACJ6H,GACFV,EAAmBU,GAEhBvJ,GAGL,sBAAC,8BAAAV,EAAA,sEACwBU,EAASmI,eADjC,QACOC,EADP,QAEctD,OAAS,IACd6E,EADiB,UACD9B,EADC,YACYO,EAAS,IAC5Ce,EAAWQ,IAJd,0CAAD,KAOC,CAAC3J,EAAUuJ,IAEd7H,qBAAU,WACRqB,QAAQC,IAAIgG,KACX,CAACA,IASF,6BACE,kBAACjK,EAAD,KACE,kBAACG,EAAD,KACE,wBAAIoE,MAAO,CAACsG,WAAY,QAAUlB,QAAS,WACzCnH,OAAOC,SAASqI,KAXJ,WACpB,IAAMC,EAAkB,CACtB,8CAEF,MAAM,GAAN,OAAUjC,EAAV,YAAuBiC,EAAgBnE,KAAKoE,MAAMpE,KAAKhC,SAAWmG,EAAgBhF,UAOnDkF,KADzB,wBAGCd,GAAW,kBAAC9J,EAAD,CAAasJ,QAAS,WAChCnH,OAAOC,SAASqI,KAAOX,IADb,YAId,kBAACpB,EAAD,CAAc9H,SAAUA,EAAUgB,cAAeA,EAAeK,kBAAmBA,KAErF,kBAAC,EAAD,CAAQiD,IAAK0E,IAGXF,EAAKmB,QAAO,SAAAC,GAAS,QAASA,EAAIxC,YAAcwC,EAAIxC,SAASyC,iBACxDnE,KAAI,SAACkE,EAAKE,GACT,OACI,kBAACC,EAAA,EAAD,CAAMC,GAAI,CAAEC,SAAU,IAAKC,MAAO,QAAUnG,IAAK+F,GAC/C,kBAACK,EAAA,EAAD,CACIC,UAAU,MACVtG,OAAO,QACPD,MAAM,QACNwG,MAAQT,EAAIxC,SAASiD,MACrBC,IAAMV,EAAIxC,SAASY,OACvB,kBAACuC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAYC,QAAS,KAAMb,EAAIxC,SAASY,OAIxC4B,EAAIxC,SAASyC,cACT,kBAACa,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQC,KAAK,QAAQC,UAAW,WAC9BpI,QAAQC,IAAR,gBACIgG,IAAgBkB,EAAIxC,SAASyC,cAIjClB,EAAeiB,EAAIxC,SAASyC,eAH1BlB,EAAe,QAIZD,IAAgBkB,EAAIxC,SAASyC,cAAiB,OAAS,SAC/C,oC,SC1IrCiB,EAAS,IAAIC,IAAa,CAC9BC,IAAK,qEAGPC,IAASC,OACP,kBAACC,EAAA,EAAD,CAAgBL,OAAQA,GACpB,kBAAC,IAAD,KACI,kBAAC,IAAD,KACA,kBAAC,IAAD,CAAOM,KAAM,KAAMC,QAAS,kBAAC,EAAD,WAIpC3H,SAASC,eAAe,W","file":"static/js/main.fa178b3a.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nexport const Header = styled.header`\n  background-color: #282c34;\n  min-height: 70px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n  color: white;\n`;\n\nexport const MenuItems = styled.div`\n  position: absolute;\n  left: 0;\n  display: inline-flex;\n  flex-wrap: wrap;\n  min-height: 70px;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  color: white;\n`;\n\nexport const Body = styled.div`\n  align-items: center;\n  background-color: #282c34;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  font-size: calc(10px + 2vmin);\n  justify-content: center;\n  min-height: calc(100vh - 70px);\n`;\n\nexport const Image = styled.img`\n  height: 40vmin;\n  margin-bottom: 16px;\n  pointer-events: none;\n`;\n\nexport const Link = styled.a.attrs({\n  target: \"_blank\",\n  rel: \"noopener noreferrer\",\n})`\n  color: #61dafb;\n  margin-top: 10px;\n`;\n\nexport const ReactButton = styled.button`\n  background-color: white;\n  border: none;\n  border-radius: 8px;\n  color: #282c34;\n  cursor: pointer;\n  font-size: 16px;\n  text-align: center;\n  text-decoration: none;\n  margin: 0px 20px;\n  padding: 12px 24px;\n\n  ${props => props.hidden && \"hidden\"} :focus {\n    border: none;\n    outline: none;\n  }\n`;\n\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport Web3Modal from \"web3modal\";\n\n// Enter a valid infura key here to avoid being rate limited\n// You can get a key for free at https://infura.io/register\nconst INFURA_ID = \"INVALID_INFURA_KEY\";\n\nconst NETWORK = \"mainnet\";\n\nfunction useWeb3Modal(config = {}) {\n  const [provider, setProvider] = useState();\n  const [autoLoaded, setAutoLoaded] = useState(false);\n  const { autoLoad = true, infuraId = INFURA_ID, network = NETWORK } = config;\n\n  // Web3Modal also supports many other wallets.\n  // You can see other options at https://github.com/Web3Modal/web3modal\n  const web3Modal = useMemo(() => {\n    return new Web3Modal({\n      network,\n      cacheProvider: true,\n      providerOptions: {\n        walletconnect: {\n          package: WalletConnectProvider,\n          options: {\n            infuraId,\n          },\n        },\n      },\n    });\n  }, [infuraId, network]);\n\n  // Open wallet selection modal.\n  const loadWeb3Modal = useCallback(async () => {\n    const newProvider = await web3Modal.connect();\n    setProvider(new Web3Provider(newProvider));\n  }, [web3Modal]);\n\n  const logoutOfWeb3Modal = useCallback(\n    async function () {\n      await web3Modal.clearCachedProvider();\n      window.location.reload();\n    },\n    [web3Modal],\n  );\n\n  // If autoLoad is enabled and the the wallet had been loaded before, load it automatically now.\n  useEffect(() => {\n    if (autoLoad && !autoLoaded && web3Modal.cachedProvider) {\n      loadWeb3Modal();\n      setAutoLoaded(true);\n    }\n  }, [autoLoad, autoLoaded, loadWeb3Modal, setAutoLoaded, web3Modal.cachedProvider]);\n\n  return [provider, loadWeb3Modal, logoutOfWeb3Modal];\n}\n\nexport default useWeb3Modal;\n","// Adapted from https://therewasaguy.github.io/p5-music-viz/demos/01d_beat_detect_amplitude/sketch.js\n\nimport React, {useEffect, useRef, useState} from \"react\";\nimport Sketch from \"react-p5\";\nimport 'p5/lib/addons/p5.sound';\n\nlet Canvas = (props) => {\n    const soundFile = useRef(null);\n    const amplitude = useRef(null);\n\n    const backgroundColor = useRef(null);\n\n    // rectangle parameters\n    const rectRotate = useRef(true);\n    const rectMin = 15;\n    const rectOffset = 20;\n    const numRects = 10;\n\n    // :: Beat Detect Variables\n    // how many draw loop frames before the beatCutoff starts to decay\n    // so that another beat can be triggered.\n    // frameRate() is usually around 60 frames per second,\n    // so 20 fps = 3 beats per second, meaning if the song is over 180 BPM,\n    // we wont respond to every beat.\n    const beatHoldFrames = 30;\n\n    // what amplitude level can trigger a beat?\n    const beatThreshold = 0.11;\n\n    // When we have a beat, beatCutoff will be reset to 1.1*beatThreshold, and then decay\n    // Level must be greater than beatThreshold and beatCutoff before the next beat can trigger.\n    const beatCutoff = useRef(0);\n    const beatDecayRate = useRef(0.98); // how fast does beat cutoff decay?\n    const framesSinceLastBeat = useRef(0); // once this equals beatHoldFrames, beatCutoff starts to decay.\n\n    const touchEnded = (evt) => {\n        if (!soundFile.current || soundFile.current._playing) {\n            if (soundFile.current && soundFile.current._playing) {\n                soundFile.current.pause();\n            }\n            return;\n        }\n        soundFile.current._looping = true;\n        soundFile.current.play();\n    };\n\n    const preload = (_p5) => {\n        console.log(\"Starting preload\");\n\n        const url = props.url;\n        if (!url || !url.length) {\n            return;\n        }\n        try {\n            soundFile.current && soundFile.current.stop();\n            soundFile.current = _p5.loadSound(url, () => {\n                amplitude.current = new _p5.constructor.Amplitude();\n                amplitude.current.setInput(soundFile.current);\n                amplitude.current.smooth(0.9);\n                document.getElementById('vidId1').play();\n            });\n        } catch (err) {\n            console.log(err);\n        }\n        soundFile.current._looping = true;\n        console.log(\"Ending preload\");\n    };\n    const setup = async (_p5, canvasParentRef) => {\n        console.log(\"Starting setup\");\n        // use parent to render the canvas in this ref\n        // (without that p5 will render the canvas outside of your component)\n        let canvas = _p5.createCanvas(256, 256).parent(canvasParentRef);\n        canvas.elt.addEventListener(\"mousedown\", touchEnded);\n        canvas.style( 'margin', 'auto' );\n        canvas.style( 'display', 'block' );\n        canvas.style( 'padding', '30px');\n        _p5.noStroke();\n        _p5.rectMode(_p5.CENTER);\n        backgroundColor.current = _p5.color(\n            _p5.random(0,255),\n            _p5.random(0,255),\n            _p5.random(0,255),\n            80\n        );\n        if (soundFile.current) {\n            soundFile.current.play();\n        }\n\n        console.log(\"Ending setup\");\n    };\n\n    const detectBeat = (_p5, level) => {\n        if (level  > beatCutoff.current && level > beatThreshold){\n            onBeat(_p5);\n            beatCutoff.current = level *1.2;\n            framesSinceLastBeat.current = 0;\n        } else {\n            if (framesSinceLastBeat.current <= beatHoldFrames) {\n                framesSinceLastBeat.current++;\n            } else {\n                beatCutoff.current *= beatDecayRate.current;\n                beatCutoff.current = Math.max(beatCutoff.current, beatThreshold);\n            }\n        }\n    }\n\n    const onBeat = (_p5) => {\n        if (!soundFile.current || !soundFile.current._playing) {\n            return;\n        }\n        backgroundColor.current = _p5.color(\n            _p5.random(0,255),\n            _p5.random(0,255),\n            _p5.random(0,255),\n            80\n        );\n        rectRotate.current = !rectRotate.current;\n    }\n\n    const draw = (_p5) => {\n        _p5.clear();\n        if (backgroundColor.current) {\n            _p5.background(backgroundColor.current);\n        }\n\n        if (!amplitude.current) {\n            return;\n        }\n        const level = amplitude.current.getLevel();\n        detectBeat(_p5, level);\n\n        // distort the rectangle based based on the amp\n        const distortDiam = _p5.map(level, 0, 1, 0, 1200);\n        let rotation;\n\n        // distortion direction shifts each beat\n        if (rectRotate.current) {\n            rotation = _p5.PI/ 2;\n        } else {\n            rotation = _p5.PI/ 3;\n        }\n\n        // rotate the drawing coordinates to rectCenter position\n        const rectCenter = _p5.createVector(_p5.width/3, _p5.height/2);\n\n        _p5.push();\n\n        // draw the rectangles\n        for (let i = 0; i < numRects; i++) {\n            const x = rectCenter.x + rectOffset * i;\n            const y = rectCenter.y + distortDiam / 2;\n            // rotate around the center of this rectangle\n            _p5.translate(x, y);\n            _p5.rotate(rotation);\n            _p5.rect(0, 0, rectMin, rectMin + distortDiam);\n        }\n        _p5.pop();\n    };\n\n    console.log(\"Rendering a new Sketch\");\n    const video = (<video id=\"vidId1\" onLoadStart={() => {\n        document.getElementById('vidId1').volume = 0.0;\n    }} style={{width: '256px', height: '256px', 'zIndex': 1}} key={\"vid-\" + props.url} width=\"320\" height=\"320\" autoPlay={false}>\n        <source src={props.url} type=\"video/mp4\" />\n        Your browser does not support the video tag.\n    </video>);\n    console.log(video);\n\n    return <div style={{display: 'flex', 'alignItems': 'center', 'justifyContent': \"center\", width: \"300px\", height: \"300px\", margin: 'auto'}}>\n        {video}\n        <Sketch style={{position: 'absolute', 'zIndex': 2 /* <-- to remove */ }} key={props.url} preload={preload} setup={setup} draw={draw}/>\n    </div>;\n};\n\nexport default Canvas;\n","export class ApiKeys {\n    static MORALIS_API_KEY = 'gbHOOdSc86Ft29Fs4NjuEC0o0KxcOCdH5N4JX2J2aszsxxTiJmoWOzFNT6VdXBrs';\n}","import axios from \"axios\";\nimport {ApiKeys} from \"../apiKeys/ApiKeys\";\n\nexport interface MoralisInfo {\n    token_address: string\n    token_id: string\n    metadata: MoralisMetadata\n}\n\nexport interface MoralisMetadata {\n    name: string\n    description: string\n    animation_url: string\n}\n\nexport class MoralisAPI {\n    getNftUrl(accountAddress: string) {\n        return `https://deep-index.moralis.io/api/v2/${accountAddress}/nft?chain=eth&format=decimal`\n    }\n\n    getNFTs(accountAddress: string): Promise<MoralisInfo[]> {\n        return axios({\n            method: 'get',\n            url: this.getNftUrl(accountAddress),\n            headers: {\n                'X-API-Key': ApiKeys.MORALIS_API_KEY,\n                'accept': 'application/json'\n            }\n        }).then(res => {\n            if (!res.data || !res.data.result) {\n                return [];\n            }\n            const results = res.data.result.map((m: any) => {\n                m.metadata = JSON.parse(m.metadata) as MoralisMetadata;\n                return m;\n            });\n            // console.log(JSON.stringify(results));\n\n            return results as MoralisInfo[];\n        });\n    }\n}","import React, {useEffect, useState} from \"react\";\n\nimport {Header, MenuItems, ReactButton} from \"./components\";\nimport useWeb3Modal from \"./hooks/useWeb3Modal\";\nimport Canvas from \"./components/Canvas\";\nimport {MoralisAPI} from \"./hooks/MoralisAPI\";\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport CardMedia from '@mui/material/CardMedia';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport {useMatch} from 'react-router-dom';\n\nconst BASE_PATH = '/musicNFT-viewer/address';\nfunction WalletButton({ provider, loadWeb3Modal, logoutOfWeb3Modal }) {\n  const [account, setAccount] = useState(\"\");\n  const [rendered, setRendered] = useState(\"\");\n\n  useEffect(() => {\n    async function fetchAccount() {\n      try {\n        if (!provider) {\n          return;\n        }\n\n        // Load the user's accounts.\n        const accounts = await provider.listAccounts();\n        setAccount(accounts[0]);\n\n        // Resolve the ENS name for the first account.\n        const name = await provider.lookupAddress(accounts[0]);\n\n        // Render either the ENS name or the shortened account address.\n        if (name) {\n          setRendered(name);\n        } else {\n          setRendered(account.substring(0, 6) + \"...\" + account.substring(36));\n        }\n      } catch (err) {\n        setAccount(\"\");\n        setRendered(\"\");\n        console.error(err);\n      }\n    }\n    fetchAccount();\n  }, [account, provider, setAccount, setRendered]);\n\n  return (\n    <ReactButton\n      onClick={() => {\n        if (!provider) {\n          loadWeb3Modal();\n        } else {\n          logoutOfWeb3Modal();\n        }\n      }}\n    >\n      {rendered === \"\" && \"Connect Wallet\"}\n      {rendered !== \"\" && \"Disconnect Wallet\"}\n    </ReactButton>\n  );\n}\n\nfunction App() {\n  const [provider, loadWeb3Modal, logoutOfWeb3Modal] = useWeb3Modal();\n  const [contractAddress, setContractAddress] = useState(null);\n  const [nfts, setNfts] = useState([]);\n  const [playbackURL, setPlaybackURL] = useState(null);\n  const [address, setAddress] = useState(null);\n  const moralisAPI = new MoralisAPI();\n\n  let match = useMatch(`${BASE_PATH}/:slug`);\n  const urlAddress = match && match.params && match.params.slug;\n\n  useEffect(() => {\n    if (!contractAddress || !contractAddress.length || nfts.length > 0) {\n      return;\n    }\n    moralisAPI.getNFTs(contractAddress).then(nfts => {\n      setNfts(nfts);\n    });\n  }, [contractAddress, moralisAPI]);\n\n  useEffect(() => {\n    if (urlAddress) {\n      setContractAddress(urlAddress);\n    }\n    if (!provider) {\n      return;\n    }\n    (async () => {\n      const accounts = await provider.listAccounts();\n      if (accounts.length > 0) {\n        const newAddress = `${BASE_PATH}/${accounts[0]}`;\n        setAddress(newAddress);\n      }\n    })();\n  }, [provider, urlAddress]);\n\n  useEffect(() => {\n    console.log(playbackURL);\n  }, [playbackURL]);\n\n  const randomAddress = () => {\n    const musicNFTHolders = [\n      '0x5567c85cbbe24c65c80783b520ea538552f47a88'\n    ];\n    return `${BASE_PATH}/${musicNFTHolders[Math.floor(Math.random() * musicNFTHolders.length)]}`;\n  };\n  return (\n    <div>\n      <Header>\n        <MenuItems>\n          <h4 style={{marginLeft: '10px' }} onClick={() => {\n            window.location.href = randomAddress();\n          }}>Music NFT Collection</h4>\n          {address && <ReactButton onClick={() => {\n            window.location.href = address;\n          }}>Profile</ReactButton> }\n        </MenuItems>\n        <WalletButton provider={provider} loadWeb3Modal={loadWeb3Modal} logoutOfWeb3Modal={logoutOfWeb3Modal} />\n      </Header>\n      <Canvas url={playbackURL} />\n      {/*<UserInfo />*/}\n      {\n        nfts.filter(nft => { return !!nft.metadata && !!nft.metadata.animation_url })\n            .map((nft, idx) => {\n              return (\n                  <Card sx={{ maxWidth: 300, float: 'left' }} key={idx}>\n                    <CardMedia\n                        component=\"img\"\n                        height=\"140px\"\n                        width=\"140px\"\n                        image={ nft.metadata.image }\n                        alt={ nft.metadata.name } />\n                    <CardContent>\n                      <Typography variant={\"b\"}>{nft.metadata.name}</Typography>\n                    </CardContent>\n\n                    {\n                      nft.metadata.animation_url ?\n                          <CardActions>\n                            <Button size=\"large\" onMouseUp={() => {\n                              console.log(`Touch ended!`);\n                              if (playbackURL === nft.metadata.animation_url) {\n                                setPlaybackURL(null);\n                                return;\n                              }\n                              setPlaybackURL(nft.metadata.animation_url);\n                            }} >{ (playbackURL !== nft.metadata.animation_url) ? \"play\" : \"stop\" }</Button>\n                          </CardActions> : <div/>\n                    }\n                  </Card>\n              )\n        })\n      }\n    </div>\n  );\n}\n\nexport default App;\n","import \"./index.css\";\n\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport ApolloClient from \"apollo-boost\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {Route, Routes} from 'react-router';\n\nimport App from \"./App\";\nimport {BrowserRouter} from \"react-router-dom\";\n\n// You should replace this url with your own and put it into a .env file\n// See all subgraphs: https://thegraph.com/explorer/\nconst client = new ApolloClient({\n  uri: \"https://api.thegraph.com/subgraphs/name/paulrberg/create-eth-app\",\n});\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n      <BrowserRouter>\n          <Routes>\n          <Route path={\"/*\"} element={<App />}/>\n          </Routes>\n      </BrowserRouter>\n  </ApolloProvider>,\n  document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}